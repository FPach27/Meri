<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Regalo para mi novia</title>
  <style>
    /* Estilos b√°sicos */
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: #ffc4f1;
      font-family: sans-serif;
      position: relative;
      height: 100vh;
    }

    /* Instrucci√≥n superior */
    #instruction {
      position: absolute;
      top: 20px;
      width: 100%;
      text-align: center;
      font-size: 18px;
      color: #333;
      z-index: 12;
      pointer-events: none;
    }

    /* Contador de corazones atrapados */
    #counter {
      position: absolute;
      top: 50px;
      width: 100%;
      text-align: center;
      font-size: 16px;
      color: #333;
      z-index: 12;
      pointer-events: none;
    }

    /* Contenedor para corazones flotantes */
    #heart-container {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    /* Estilos de los flotadores (corazones y flores) */
    .float {
      position: absolute;
      bottom: -50px;
      opacity: 0.9;
      pointer-events: none;
      animation: floatUp 6s linear forwards;
    }

    /* Corazones clicables */
    .heart {
      pointer-events: auto;
      cursor: pointer;
    }

    /* Animaci√≥n de subida */
    @keyframes floatUp {
      0% { transform: translateY(0) scale(1); opacity: 0.9; }
      100% { transform: translateY(-110vh) scale(0.8); opacity: 0; }
    }

    /* Animaci√≥n pop al hacer click */
    @keyframes pop {
      0% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.5); opacity: 0.8; }
      100% { transform: scale(0); opacity: 0; }
    }
    .pop { animation: pop 0.5s ease-out forwards; }

    /* Mensajes emergentes */
    .message {
      position: absolute;
      background: rgba(255, 255, 255, 0.9);
      padding: 10px 15px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      pointer-events: none;
      z-index: 10;
      transform: translate(-50%, -100%);
      white-space: nowrap;
      font-size: 14px;
      opacity: 0;
      animation: fadeInOut 3s ease-out forwards;
    }

    @keyframes fadeInOut {
      0% { opacity: 0; }
      10% { opacity: 1; }
      90% { opacity: 1; }
      100% { opacity: 0; }
    }

    /* Contenedor final con carta y espacio para flores */
    #final-container {
      position: absolute;
      bottom: 0;
      width: 100%;
      height: 0;
      overflow: visible;
      transition: height 2s ease;
      /* habilitar interacci√≥n para scroll */
      pointer-events: auto;
    }

    /* Carta dedicatoria ajustada con scroll y fuente m√°s peque√±a */
    #letter {
      position: absolute;
      top: 40%;
      left: 50%;
      transform: translate(-50%, -40%);
      background: white;
      padding: 16px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      display: none;
      width: 80%;
      max-width: 600px;
      height: 75vh;
      overflow-y: auto;
      text-align: left;
      line-height: 1.4;
      font-size: 14px;
      z-index: 11;
      /* permitir scroll */
      pointer-events: auto;
    }
  </style>
</head>
<body>
  <audio id="bgm" src="locos.mp3" loop preload="auto"></audio>
  <div id="instruction">Atrapa 20 corazones para una sorpresa!</div>
  <div id="counter">0/20</div>
  <div id="heart-container"></div>
  <div id="final-container">
    <div id="letter">
      <h2>Para ti, mi amor</h2>
      <p>
        Hay cosas que simplemente no se pueden explicar con palabras‚Ä¶<br><br>
        Y lo que siento por ti es una de ellas.<br><br>
        No importa cu√°ntas veces intente escribirlo, siempre se me quedan cortas las letras, las frases y hasta los pensamientos. Porque lo nuestro no es algo que se diga‚Ä¶ es algo que se siente. Que se respira. Que se vive.<br><br>
        Meri, no hay en este mundo una persona a la que ame m√°s que a ti.<br>
        No hay otra sonrisa que me d√© paz como la tuya.<br>
        No hay abrazo que desee m√°s que el tuyo, aunque por ahora tenga que imagin√°rtelo.<br><br>
        Me haces sentir afortunado cada d√≠a.<br>
        Afortunado por tenerte.<br>
        Por conocerte.<br>
        Por amarte.<br>
        Y, sobre todo, por ser amado por ti.<br><br>
        T√∫ eres mi presente, mi esperanza, mi hogar.<br>
        Y s√© que, si existen otras vidas, tambi√©n te am√© en ellas.<br>
        Porque amarte se siente‚Ä¶ inevitable. Natural. Correcto.<br><br>
        Gracias por estar en mi vida.<br>
        Gracias por elegirme cada d√≠a.<br>
        Y por recordarme, incluso a la distancia, lo hermoso que es amar sin l√≠mites.<br><br>
        Siempre tuyo,<br>
        con todo mi coraz√≥n,<br>
        Fausto üíï‚ú®Ô∏è
      </p>
    </div>
  </div>
  <script>
    window.addEventListener('load', () => {
      const bgm = document.getElementById('bgm');
      bgm.play().catch(() => console.log('Autoplay bloqueado'));
    });
    let phrases = [
      "Eres la casualidad m√°s bonita que me pas√≥ en la vida",
      "Aunque est√©s lejos, te siento m√°s cerca que nunca",
      "Si tuviera que elegir de nuevo, te elegir√≠a a ti mil veces m√°s",
      "Todo en ti me inspira a ser mejor",
      "Todos los d√≠as te amo cada vez m√°s",
      "Eres mi persona favorita en este mundo",
      "Haces sentir a mi coraz√≥n amado y cuidado como nunca",
      "Mi amor por ti no tiene fin",
      "Eres mi sue√±o hecho realidad mi amor",
      "Contigo aprend√≠ lo que es el amor de verdad",
      "Eres mi lugar favorito",
      "Me haces feliz con solo existir",
      "Cada detalle tuyo me enamora m√°s de lo que cre√≠ posible",
      "Eres lo mejor que me ha pasado",
      "Eres la calma en medio de cualquier caos",
      "Si el amor tiene forma, seguramente se parece mucho a ti",
      "Tienes una forma tan √∫nica de hacerme sentir especial",
      "Mi mejor decisi√≥n siempre va a ser elegirte a ti",
      "Te pienso y autom√°ticamente sonr√≠o",
      "T√∫ haces que todo valga la pena"
    ];
    const heartEmojis = ['‚ù§Ô∏è','üíú','ü©µ','üíõ','üíö'];
    const flowerEmojis = ['üå∏','üå∫','üåª','üå∑','üåº'];
    let clickedCount = 0;
    const maxClicks = 20;
    const heartContainer = document.getElementById('heart-container');
    const counterEl = document.getElementById('counter');
    const finalContainer = document.getElementById('final-container');
    const letter = document.getElementById('letter');
    let gameOver = false;
    let heartInterval, flowerInterval;
    function showMessage(text, x, y) {
      const msg = document.createElement('div'); msg.classList.add('message'); msg.textContent = text;
      msg.style.left = x+'px'; msg.style.top = y+'px'; document.body.appendChild(msg);
      msg.addEventListener('animationend', () => msg.remove());
    }
    function createFloat(emoji, container) {
      const el = document.createElement('div'); el.classList.add('float'); el.textContent = emoji;
      const size = Math.random()*20+40; el.style.fontSize=size+'px'; el.style.left=Math.random()*100+'vw'; container.appendChild(el);
      return el;
    }
    function createHeart() {
      if(gameOver) return; const emoji = heartEmojis[Math.floor(Math.random()*heartEmojis.length)];
      const heart = createFloat(emoji, heartContainer); heart.classList.add('heart');
      heart.addEventListener('click', (e) => {
        if(gameOver||heart.classList.contains('pop')) return;
        heart.classList.add('pop'); const phrase = phrases.splice(Math.floor(Math.random()*phrases.length),1)[0];
        showMessage(phrase, e.clientX, e.clientY);
        clickedCount++; counterEl.textContent=`${clickedCount}/${maxClicks}`;
        setTimeout(() => heart.remove(), 500);
        if(clickedCount>=maxClicks) showFinal();
      });
      setTimeout(() => heart.remove(), 6000);
    }
    function showFinal() {
      gameOver=true; clearInterval(heartInterval);
      finalContainer.style.height='100vh'; letter.style.display='block';
      flowerInterval = setInterval(() => {
        const fl = createFloat(flowerEmojis[Math.floor(Math.random()*flowerEmojis.length)], document.body);
        setTimeout(() => fl.remove(), 8000);
      }, 400);
    }
    heartInterval = setInterval(createHeart, 800);
  </script>
</body>
</html>
